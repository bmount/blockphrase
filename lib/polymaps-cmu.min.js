if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function ea(e){var i=e.indexOf(":");return i<0?e:{space:s.ns[e.substring(0,i)],local:e.substring(i+1)}}function R(){for(var e=0;e<R.maps.length;e++)R.maps[e].resize()}function V(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function W(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function Z(e,i){if(e.row>i.row){var a=e;e=i;i=a}return{x0:e.column,y0:e.row,x1:i.column,y1:i.row,dx:i.column-e.column,dy:i.row-e.row}}function ba(e,i,a,m,d){a=Math.max(a,Math.floor(i.y0));
m=Math.min(m,Math.ceil(i.y1));if(e.x0==i.x0&&e.y0==i.y0?e.x0+i.dy/e.dy*e.dx<i.x1:e.x1-i.dy/e.dy*e.dx<i.x0){var c=e;e=i;i=c}c=e.dx/e.dy;var f=i.dx/i.dy,l=e.dx>0,t=i.dx<0;for(a=a;a<m;a++){var n=c*Math.max(0,Math.min(e.dy,a+l-e.y0))+e.x0;d(Math.floor(f*Math.max(0,Math.min(i.dy,a+t-i.y0))+i.x0),Math.ceil(n),a)}}function ca(e,i,a,m,d,c){var f=Z(e,i);i=Z(i,a);e=Z(a,e);if(f.dy>i.dy){a=f;f=i;i=a}if(f.dy>e.dy){a=f;f=e;e=a}if(i.dy>e.dy){a=i;i=e;e=a}f.dy&&ba(e,f,m,d,c);i.dy&&ba(e,i,m,d,c)}s.version="2.5.1";
var Y={x:0,y:0};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.id=function(){var e=0;return function(){return++e}}();s.svg=function(e){return document.createElementNS(s.ns.svg,e)};s.transform=function(e,i,a,m,d,c){var f={},l,t,n;if(!arguments.length){e=1;i=d=a=0;m=1;c=0}f.zoomFraction=function(k){if(!arguments.length)return t;t=k;l=Math.floor(t+Math.log(Math.sqrt(e*e+i*i+a*a+m*m))/Math.LN2);n=Math.pow(2,-l);return f};f.apply=function(k){var h=Math.pow(2,-k.zoom),r=
Math.pow(2,k.zoom-l);return{column:(e*k.column*h+a*k.row*h+d)*r,row:(i*k.column*h+m*k.row*h+c)*r,zoom:k.zoom-l}};f.unapply=function(k){var h=Math.pow(2,-k.zoom),r=Math.pow(2,k.zoom+l);return{column:(k.column*h*m-k.row*h*a-d*m+c*a)/(e*m-i*a)*r,row:(k.column*h*i-k.row*h*e-d*i+c*e)/(a*i-m*e)*r,zoom:k.zoom+l}};f.toString=function(){return"matrix("+[e*n,i*n,a*n,m*n].join(" ")+" 0 0)"};return f.zoomFraction(0)};s.cache=function(e,i){function a(h){k--;i&&i(h);delete f[h.key];if(h.next)h.next.prev=h.prev;
else if(t=h.prev)t.next=null;if(h.prev)h.prev.next=h.next;else if(l=h.next)l.prev=null}function m(){for(var h=t;k>n;h=h.prev){if(!h)break;h.lock||a(h)}}var d={},c={},f={},l=null,t=null,n=64,k=0;d.peek=function(h){return f[[h.zoom,h.column,h.row].join("/")]};d.load=function(h,r){var w=[h.zoom,h.column,h.row].join("/"),A=f[w];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else t=A.prev;A.prev=null;A.next=l;l=l.prev=A}A.lock=1;return c[w]=A}A={key:w,column:h.column,row:h.row,zoom:h.zoom,next:l,
prev:null,lock:1};e.call(null,A,r);c[w]=f[w]=A;if(l)l.prev=A;else t=A;l=A;k++;return A};d.unload=function(h){if(!(h in c))return false;var r=c[h];r.lock=0;delete c[h];r.request&&r.request.abort(false)&&a(r);return r};d.locks=function(){return c};d.size=function(h){if(!arguments.length)return n;n=h;m();return d};d.flush=function(){m();return d};d.clear=function(){for(var h in f){var r=f[h];r.request&&r.request.abort(false);i&&i(f[h]);if(r.lock){r.lock=0;r.element.parentNode.removeChild(r.element)}}c=
{};f={};l=t=null;k=0;return d};return d};s.url=function(e){function i(d){var c=d.zoom<0?1:1<<d.zoom,f=d.column;if(m){f=d.column%c;if(f<0)f+=c}else if(f<0||f>=c)return null;return e.replace(/{(.)}/g,function(l,t){switch(t){case "S":return a[(Math.abs(d.zoom)+d.row+f)%a.length];case "Z":return d.zoom;case "X":return f;case "Y":return d.row;case "H":return c-d.row-1;case "B":var n=s.map.coordinateLocation({row:d.row,column:f,zoom:d.zoom}),k=s.map.coordinateLocation({row:d.row+1,column:f+1,zoom:d.zoom}),
h=Math.ceil(Math.log(d.zoom)/Math.LN2);return k.lat.toFixed(h)+","+n.lon.toFixed(h)+","+n.lat.toFixed(h)+","+k.lon.toFixed(h);case "G":n=s.map.coordinateLocation({row:d.row,column:f,zoom:d.zoom});k=s.map.coordinateLocation({row:d.row+1,column:f+1,zoom:d.zoom});h=Math.ceil(Math.log(d.zoom)/Math.LN2);return n.lon.toFixed(h)+","+k.lat.toFixed(h)+","+k.lon.toFixed(h)+","+n.lat.toFixed(h)}return t})}var a=[],m=true;i.template=function(d){if(!arguments.length)return e;e=d;return i};i.hosts=function(d){if(!arguments.length)return a;
a=d;return i};i.repeat=function(d){if(!arguments.length)return m;m=d;return i};return i};s.dispatch=function(e){var i={};e.on=function(a,m){for(var d=i[a]||(i[a]=[]),c=0;c<d.length;c++)if(d[c].handler==m)return e;d.push({handler:m,on:true});return e};e.off=function(a,m){var d=i[a];if(d)for(var c=0;c<d.length;c++){var f=d[c];if(f.handler==m){f.on=false;d.splice(c,1);break}}return e};return function(a){var m=i[a.type];if(m){m=m.slice();for(var d=0;d<m.length;d++){var c=m[d];c.on&&c.handler.call(e,a)}}}};
s.queue=function(){function e(){if(!(d>=c||!m.length)){d++;m.pop()()}}function i(f){for(var l=0;l<m.length;l++)if(m[l]==f){m.splice(l,1);return true}return false}function a(f,l,t){function n(){k=new XMLHttpRequest;t&&k.overrideMimeType&&k.overrideMimeType(t);k.open("GET",f,true);k.onreadystatechange=function(){if(k.readyState==4){d--;k.status<300&&l(k);e()}};k.send(null)}var k;m.push(n);e();return{abort:function(h){if(i(n))return true;if(h&&k){k.abort();return true}return false}}}var m=[],d=0,c=6;
return{text:function(f,l,t){return a(f,function(n){n.responseText&&l(n.responseText)},t)},xml:function(f,l){return a(f,function(t){t.responseXML&&l(t.responseXML)},"application/xml")},json:function(f,l){return a(f,function(t){t.responseText&&l(JSON.parse(t.responseText))},"application/json")},image:function(f,l,t){function n(){k=document.createElement("img");k.onerror=function(){d--;e()};k.onload=function(){d--;t(k);e()};k.src=l;f.setAttributeNS(s.ns.xlink,"href",l)}var k;m.push(n);e();return{abort:function(h){if(i(n))return true;
if(h&&k){k.src="about:";return true}return false}}}}}();s.map=function(){function e(){if(r)if(n<r[0])n=r[0];else if(n>r[1])n=r[1];k=n-(n=Math.round(n));h=Math.pow(2,k)}function i(){if(q){var g=45/Math.pow(2,n+k-3),u=Math.max(Math.abs(C*f.x+A*f.y),Math.abs(B*f.x+E*f.y)),o=V(K-u*g/l.y);u=V(j+u*g/l.y);t.lat=Math.max(o,Math.min(u,t.lat));o=Math.max(Math.abs(C*f.y+A*f.x),Math.abs(B*f.y+E*f.x));t.lon=Math.max(q[0].lon-o*g/l.x,Math.min(q[1].lon+o*g/l.x,t.lon))}}var a={},m,d,c=Y,f=Y,l={x:256,y:256},t={lat:37.76487,
lon:-122.41948},n=12,k=0,h=1,r=[1,18],w=0,A=1,C=0,E=1,B=0,K=-180,j=180,q=[{lat:V(K),lon:-Infinity},{lat:V(j),lon:Infinity}];a.locationCoordinate=function(g){g=s.map.locationCoordinate(g);var u=Math.pow(2,n);g.column*=u;g.row*=u;g.zoom+=n;return g};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(g,u){var o=Math.pow(2,n-u.zoom),y=Math.pow(2,n-g.zoom),v=(u.column*o-g.column*y)*l.x*h;o=(u.row*o-g.row*y)*l.y*h;return{x:f.x+A*v-C*o,y:f.y+C*v+A*o}};a.pointCoordinate=function(g,u){var o=
Math.pow(2,n-g.zoom),y=(u.x-f.x)/h,v=(u.y-f.y)/h;return{column:g.column*o+(E*y-B*v)/l.x,row:g.row*o+(B*y+E*v)/l.y,zoom:n}};a.locationPoint=function(g){var u=Math.pow(2,n+k-3)/45,o=(g.lon-t.lon)*u*l.x;g=(W(t.lat)-W(g.lat))*u*l.y;return{x:f.x+A*o-C*g,y:f.y+C*o+A*g}};a.pointLocation=function(g){var u=45/Math.pow(2,n+k-3),o=(g.x-f.x)*u;g=(g.y-f.y)*u;return{lon:t.lon+(E*o-B*g)/l.x,lat:V(W(t.lat)-(B*o+E*g)/l.y)}};var x=s.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events",
"all");a.container=function(g){if(!arguments.length)return m;m=g;m.setAttribute("class","map");m.appendChild(x);return a.resize()};a.focusableParent=function(){for(var g=m;g;g=g.parentNode)if(g.tabIndex>=0)return g;return window};a.mouse=function(g){var u=(m.ownerSVGElement||m).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var o=document.body.appendChild(s.svg("svg"));o.style.position="absolute";o.style.top=o.style.left="0px";var y=o.getScreenCTM();$=!(y.f||y.e);document.body.removeChild(o)}if($){u.x=
g.pageX;u.y=g.pageY}else{u.x=g.clientX;u.y=g.clientY}return u.matrixTransform(m.getScreenCTM().inverse())};a.size=function(g){if(!arguments.length)return c;d=g;return a.resize()};a.resize=function(){if(d){c=d;R.remove(a)}else{x.setAttribute("width","100%");x.setAttribute("height","100%");b=x.getBBox();c={x:b.width,y:b.height};R.add(a)}x.setAttribute("width",c.x);x.setAttribute("height",c.y);f={x:c.x/2,y:c.y/2};i();a.dispatch({type:"resize"});return a};a.tileSize=function(g){if(!arguments.length)return l;
l=g;a.dispatch({type:"move"});return a};a.center=function(g){if(!arguments.length)return t;t=g;i();a.dispatch({type:"move"});return a};a.panBy=function(g){var u=45/Math.pow(2,n+k-3),o=g.x*u;g=g.y*u;return a.center({lon:t.lon+(B*g-E*o)/l.x,lat:V(W(t.lat)+(B*o+E*g)/l.y)})};a.centerRange=function(g){if(!arguments.length)return q;if(q=g){K=q[0].lat>-90?W(q[0].lat):-Infinity;j=q[0].lat<90?W(q[1].lat):Infinity}else{K=-Infinity;j=Infinity}i();a.dispatch({type:"move"});return a};a.zoom=function(g){if(!arguments.length)return n+
k;n=g;e();return a.center(t)};a.zoomBy=function(g,u,o){if(arguments.length<2)return a.zoom(n+k+g);if(arguments.length<3)o=a.pointLocation(u);n=n+k+g;e();var y=a.locationPoint(o);return a.panBy({x:u.x-y.x,y:u.y-y.y})};a.zoomRange=function(g){if(!arguments.length)return r;r=g;return a.zoom(n+k)};a.extent=function(g){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var u=a.locationPoint(g[0]),o=a.locationPoint(g[1]),y=Math.max((o.x-u.x)/c.x,(u.y-o.y)/c.y);u=a.pointLocation({x:(u.x+
o.x)/2,y:(u.y+o.y)/2});n=n+k-Math.log(y)/Math.LN2;e();return a.center(u)};a.angle=function(g){if(!arguments.length)return w;w=g;A=Math.cos(w);C=Math.sin(w);E=Math.cos(-w);B=Math.sin(-w);i();a.dispatch({type:"move"});return a};a.add=function(g){g.map(a);return a};a.remove=function(g){g.map(null);return a};a.dispatch=s.dispatch(a);return a};R.maps=[];R.add=function(e){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==e)return;R.maps.push(e)};R.remove=function(e){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==
e){R.maps.splice(i,1);return}};if(window.addEventListener){window.addEventListener("resize",R,false);window.addEventListener("load",R,false)}s.map.locationCoordinate=function(e){var i=1/360;return{column:(e.lon+180)*i,row:(180-W(e.lat))*i,zoom:0}};s.map.coordinateLocation=function(e){var i=45/Math.pow(2,e.zoom-3);return{lon:i*e.column-180,lat:V(180-i*e.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(e,i){function a(B){for(var K=C[0].nextSibling;A<B;A++){r.insertBefore(C[-4],
K);r.insertBefore(C[2],K);r.insertBefore(C[1],K);for(var j=C[-4],q=-4;q<2;)C[q]=C[++q];C[q]=j}}function m(B){for(var K=C[0].nextSibling;A>B;A--){r.insertBefore(C[-1],K);r.insertBefore(C[2],C[-4]);for(var j=C[2],q=2;q>-4;)C[q]=C[--q];C[q]=j}}function d(){function B(M){var I=M.zoom,T=I<0?1:1<<I,U=M.column%T,z=M.row;if(U<0)U+=T;return{locationPoint:function(D){D=s.map.locationCoordinate(D);var H=Math.pow(2,I-D.zoom);return{x:o.x*(H*D.column-U),y:o.y*(H*D.row-z)}}}}function K(M,I,T){var U=F.zoom,z=2-
S,D=4+S;for(M=M;M<I;M++){var H=f.load({column:M,row:T,zoom:U},B);if(!H.ready&&!(H.key in N)){H.proxyRefs={};for(var J,L,O,Q=1;Q<=z;Q++){L=true;for(var X=0,da=1<<Q;X<=da;X++)for(var aa=0;aa<=da;aa++)if((O=f.peek(J={column:(M<<Q)+aa,row:(T<<Q)+X,zoom:U+Q}))&&O.ready){N[O.key]=f.load(J);O.proxyCount++;H.proxyRefs[O.key]=O}else L=false;if(L)break}if(!L)for(Q=1;Q<=D;Q++)if((O=f.peek(J={column:M>>Q,row:T>>Q,zoom:U-Q}))&&O.ready){N[O.key]=f.load(J);O.proxyCount++;H.proxyRefs[O.key]=O;break}}N[H.key]=H}}
var j=c.map(),q=j.zoom(),x=q-(q=Math.round(q)),g=j.size(),u=j.angle(),o=j.tileSize(),y=j.locationCoordinate(j.center());if(A!=q){if(A<q)a(q);else if(A>q)m(q);else A=q;for(var v=-4;v<=2;v++){var P=C[v];P.setAttribute("class","zoom"+(v<0?"":"+")+v+" zoom"+(q+v));P.setAttribute("transform","scale("+Math.pow(2,-v)+")")}}r.setAttribute("transform","translate("+g.x/2+","+g.y/2+")"+(u?"rotate("+u/Math.PI*180+")":"")+(x?"scale("+Math.pow(2,x)+")":"")+(w?w.zoomFraction(x):""));var F=j.pointCoordinate(y,Y);
v=j.pointCoordinate(y,{x:g.x,y:0});q=j.pointCoordinate(y,g);j=j.pointCoordinate(y,{x:0,y:g.y});if(!x&&!u&&!w){y.column=(Math.round(o.x*y.column)+(g.x&1)/2)/o.x;y.row=(Math.round(o.y*y.row)+(g.y&1)/2)/o.y}if(w){F=w.unapply(F);v=w.unapply(v);q=w.unapply(q);j=w.unapply(j);y=w.unapply(y)}var S=n?n(F.zoom)-F.zoom:0;if(S){g=Math.pow(2,S);F.column*=g;F.row*=g;v.column*=g;v.row*=g;q.column*=g;q.row*=g;j.column*=g;j.row*=g;F.zoom=v.zoom=q.zoom=j.zoom+=S}x=f.locks();var N={};for(var G in x)x[G].proxyCount=
0;if(t&&S>-5&&S<3){u=F.zoom<0?1:1<<F.zoom;if(l){ca(F,v,q,0,u,K);ca(q,j,F,0,u,K)}else{g=Math.floor((F.column+q.column)/2);u=Math.max(0,Math.min(u-1,Math.floor((v.row+j.row)/2)));v=Math.min(4,F.zoom);g=g>>v<<v;u=u>>v<<v;K(g,g+1,u)}}for(G in N){v=N[G];g=Math.pow(2,v.level=v.zoom-y.zoom);v.element.setAttribute("transform","translate("+(v.x=o.x*(v.column-y.column*g))+","+(v.y=o.y*(v.row-y.row*g))+")")}for(G in x)if(!(G in N)){v=f.unload(G);v.element.parentNode.removeChild(v.element);delete v.proxyRefs}for(G in N){v=
N[G];if(v.element.parentNode!=C[v.level]){C[v.level].appendChild(v.element);c.show&&c.show(v)}}f.flush();c.dispatch({type:"move"})}var c={},f=c.cache=s.cache(e,i).size(512),l=true,t=true,n,k,h,r=s.svg("g"),w,A,C={};r.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=r.appendChild(s.svg("g"));for(E=2;E>=1;E--)C[E]=r.appendChild(s.svg("g"));C[0]=r.appendChild(s.svg("g"));c.map=function(B){if(!arguments.length)return h;if(h){if(h==B){r.parentNode.appendChild(r);return c}h.off("move",d).off("resize",
d);r.parentNode.removeChild(r)}if(h=B){h.container().appendChild(r);c.init&&c.init(r);h.on("move",d).on("resize",d);d()}return c};c.container=function(){return r};c.levels=function(){return C};c.id=function(B){if(!arguments.length)return k;k=B;r.setAttribute("id",B);return c};c.visible=function(B){if(!arguments.length)return t;(t=B)?r.removeAttribute("visibility"):r.setAttribute("visibility","hidden");h&&d();return c};c.transform=function(B){if(!arguments.length)return w;w=B;h&&d();return c};c.zoom=
function(B){if(!arguments.length)return n;n=typeof B=="function"||B==null?B:function(){return B};h&&d();return c};c.tile=function(B){if(!arguments.length)return l;l=B;h&&d();return c};c.reload=function(){f.clear();h&&d();return c};c.dispatch=s.dispatch(c);c.on("load",function(B){if(B.tile.proxyRefs){for(var K in B.tile.proxyRefs){var j=B.tile.proxyRefs[K];--j.proxyCount<=0&&f.unload(K)&&j.element.parentNode.removeChild(j.element)}delete B.tile.proxyRefs}});return c};s.image=function(){var e=s.layer(function(a){var m=
a.element=s.svg("image"),d=e.map().tileSize();m.setAttribute("preserveAspectRatio","none");m.setAttribute("width",d.x);m.setAttribute("height",d.y);if(typeof i=="function"){m.setAttribute("opacity",0);d=i(a);if(d!=null)a.request=s.queue.image(m,d,function(c){delete a.request;a.ready=true;a.img=c;m.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});else{a.ready=true;e.dispatch({type:"load",tile:a})}}else{a.ready=true;i!=null&&m.setAttributeNS(s.ns.xlink,"href",i);e.dispatch({type:"load",
tile:a})}},function(a){a.request&&a.request.abort(true)}),i;e.url=function(a){if(!arguments.length)return i;i=typeof a=="string"&&/{.}/.test(a)?s.url(a):a;return e.reload()};return e};s.geoJson=function(e){function i(j){var q={lat:0,lon:0};return function(x){q.lat=x[1];q.lon=x[0];var g=j(q);x.x=g.x;x.y=g.y;return g}}function a(j,q){return j&&j.type in C&&C[j.type](j,q)}function m(j,q,x){return j.type in E&&E[j.type](j,q,x)}function d(){var j=c.map().zoom(),q=c.cache.locks(),x,g,u,o,y,v,P;if(w=="fixed")for(x in q){if((g=
q[x]).scale!=j){P="scale("+Math.pow(2,g.zoom-j)+")";o=-1;for(y=(u=g.features).length;++o<y;)m((v=u[o]).data.geometry,v.element,P);g.scale=j}}else for(x in q){o=-1;for(y=(u=(g=q[x]).features).length;++o<y;)m((v=u[o]).data.geometry,v.element,"");delete g.scale}}var c=s.layer(function(j,q){function x(o){var y=[];if(typeof o.rows==="object"&&o.rows.length>0){o.type="FeatureCollection";o.features=o.rows;u=true}if(o.next)j.request=e(o.next.href,x);switch(o.type){case "FeatureCollection":for(var v=0;v<o.features.length;v++){var P=
u?o.features[v].value:o.features[v],F=a(P.geometry,q);F&&y.push({element:g.appendChild(F),data:P})}break;case "Feature":(F=a(o.geometry,q))&&y.push({element:g.appendChild(F),data:o});break;default:(F=a(o,q))&&y.push({element:g.appendChild(F),data:{type:"Feature",geometry:o}});break}j.ready=true;y.push.apply(j.features,y);c.dispatch({type:"load",tile:j,features:y})}var g=j.element=s.svg("g"),u=false;j.features=[];q=i(q(j).locationPoint);if(l!=null)j.request=e(typeof l=="function"?l(j):l,x);else x({type:"FeatureCollection",
features:A||[]})},function(j){j.request&&j.request.abort(true)}),f=c.container(),l,t=true,n="org.polymaps."+s.id(),k="url(#"+n+")",h=f.insertBefore(s.svg("clipPath"),f.firstChild),r=h.appendChild(s.svg("rect")),w="auto",A;f.setAttribute("fill-rule","evenodd");h.setAttribute("id",n);if(!arguments.length)e=s.queue.json;var C={Point:function(j,q){var x=q(j.coordinates),g=s.svg("circle");g.setAttribute("r",4.5);g.setAttribute("transform","translate("+x.x+","+x.y+")");return g},MultiPoint:function(j,q){for(var x=
s.svg("g"),g=j.coordinates,u,o,y=-1,v=g.length;++y<v;){o=x.appendChild(s.svg("circle"));o.setAttribute("r",4.5);o.setAttribute("transform","translate("+(u=q(g[y])).x+","+u.y+")")}return x},LineString:function(j,q){for(var x=s.svg("path"),g=["M"],u=j.coordinates,o,y=-1,v=u.length;++y<v;)g.push((o=q(u[y])).x,",",o.y,"L");g.pop();if(g.length){x.setAttribute("d",g.join(""));return x}},MultiLineString:function(j,q){for(var x=s.svg("path"),g=[],u=j.coordinates,o,y=-1,v,P=u.length,F;++y<P;){o=u[y];v=-1;
F=o.length;for(g.push("M");++v<F;)g.push((p=q(o[v])).x,",",p.y,"L");g.pop()}if(g.length){x.setAttribute("d",g.join(""));return x}},Polygon:function(j,q){for(var x=s.svg("path"),g=[],u=j.coordinates,o,y=-1,v,P=u.length,F;++y<P;){o=u[y];v=-1;F=o.length-1;for(g.push("M");++v<F;)g.push((p=q(o[v])).x,",",p.y,"L");g[g.length-1]="Z"}if(g.length){x.setAttribute("d",g.join(""));return x}},MultiPolygon:function(j,q){for(var x=s.svg("path"),g=[],u=j.coordinates,o,y,v=-1,P,F,S=u.length,N,G;++v<S;){o=u[v];P=-1;
for(N=o.length;++P<N;){y=o[P];F=-1;G=y.length-1;for(g.push("M");++F<G;)g.push((p=q(y[F])).x,",",p.y,"L");g[g.length-1]="Z"}}if(g.length){x.setAttribute("d",g.join(""));return x}},GeometryCollection:function(j,q){for(var x=s.svg("g"),g=-1,u=j.geometries,o=u.length,y;++g<o;)(y=a(u[g],q))&&x.appendChild(y);return x}},E={Point:function(j,q,x){j=j.coordinates;q.setAttribute("transform","translate("+j.x+","+j.y+")"+x)},MultiPoint:function(j,q,x){j=j.coordinates;var g=-1,u=o.length;q=q.firstChild;for(var o;++g<
u;){o=j[g];q.setAttribute("transform","translate("+o.x+","+o.y+")"+x);q=q.nextSibling}}};c.url=function(j){if(!arguments.length)return l;l=typeof j=="string"&&/{.}/.test(j)?s.url(j):j;if(l!=null)A=null;typeof l=="string"&&c.tile(false);return c.reload()};c.features=function(j){if(!arguments.length)return A;if(A=j){l=null;c.tile(false)}return c.reload()};c.clip=function(j){if(!arguments.length)return t;t&&f.removeChild(h);if(t=j)f.insertBefore(h,f.firstChild);var q=c.cache.locks();for(var x in q)t?
q[x].element.setAttribute("clip-path",k):q[x].element.removeAttribute("clip-path");return c};var B=c.tile;c.tile=function(j){arguments.length&&!j&&c.clip(j);return B.apply(c,arguments)};var K=c.map;c.map=function(j){if(j&&r){var q=j.tileSize();r.setAttribute("width",q.x);r.setAttribute("height",q.y)}return K.apply(c,arguments)};c.scale=function(j){if(!arguments.length)return w;(w=j)?c.on("move",d):c.off("move",d);c.map()&&d();return c};c.show=function(j){t?j.element.setAttribute("clip-path",k):j.element.removeAttribute("clip-path");
c.dispatch({type:"show",tile:j,features:j.features});return c};c.reshow=function(){var j=c.cache.locks();for(var q in j)c.show(j[q]);return c};return c};s.dblclick=function(){function e(c){var f=m.zoom();f=c.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);a==="mouse"?m.zoomBy(f,m.mouse(c)):m.zoomBy(f)}var i={},a="mouse",m,d;i.zoom=function(c){if(!arguments.length)return a;a=c;return i};i.map=function(c){if(!arguments.length)return m;if(m){d.removeEventListener("dblclick",e,false);d=null}if(m=c){d=m.container();
d.addEventListener("dblclick",e,false)}return i};return i};s.drag=function(){function e(f){if(!f.shiftKey){c={x:f.clientX,y:f.clientY};m.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function i(f){if(c){m.panBy({x:f.clientX-c.x,y:f.clientY-c.y});c.x=f.clientX;c.y=f.clientY}}var a={},m,d,c;a.map=function(f){if(!arguments.length)return m;if(m){d.removeEventListener("mousedown",e,false);d=null}if(m=f){d=m.container();d.addEventListener("mousedown",
e,false)}return a};window.addEventListener("mousemove",i,false);window.addEventListener("mouseup",function(f){if(c){i(f);c=null;document.body.style.removeProperty("cursor")}},false);return a};s.wheel=function(){function e(){f=null}function i(h){var r=h.wheelDelta||-h.detail,w;if(r)if(d){try{k.scrollTop=1E3;k.dispatchEvent(h);r=1E3-k.scrollTop}catch(A){}r*=0.0050}else{w=Date.now();if(w-m>200){r=r>0?+1:-1;m=w}else r=0}if(r)switch(c){case "mouse":w=l.mouse(h);f||(f=l.pointLocation(w));l.off("move",e).zoomBy(r,
w,f).on("move",e);break;case "location":l.zoomBy(r,l.locationPoint(f),f);break;default:l.zoomBy(r);break}h.preventDefault();return false}var a={},m=0,d=true,c="mouse",f,l,t,n=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";n.style.height="2000px";k.appendChild(n);document.body.appendChild(k);a.smooth=function(h){if(!arguments.length)return d;d=h;return a};a.zoom=function(h,
r){if(!arguments.length)return c;c=h;f=r;if(l)c=="mouse"?l.on("move",e):l.off("move",e);return a};a.map=function(h){if(!arguments.length)return l;if(l){t.removeEventListener("mousemove",e,false);t.removeEventListener("mousewheel",i,false);t.removeEventListener("MozMousePixelScroll",i,false);t=null;l.off("move",e)}if(l=h){c=="mouse"&&l.on("move",e);t=l.container();t.addEventListener("mousemove",e,false);t.addEventListener("mousewheel",i,false);t.addEventListener("MozMousePixelScroll",i,false)}return a};
return a};s.arrow=function(){function e(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var A=Date.now(),C=0,E=0;switch(w.keyCode){case 37:if(!c.left){f=A;c.left=1;c.right||(C=k)}break;case 39:if(!c.right){f=A;c.right=1;c.left||(C=-k)}break;case 38:if(!c.up){f=A;c.up=1;c.down||(E=k)}break;case 40:if(!c.down){f=A;c.down=1;c.up||(E=-k)}break;default:return}if(C||E)h.panBy({x:C,y:E});if(!l&&c.left|c.right|c.up|c.down)l=setInterval(m,n);w.preventDefault()}}function i(w){f=Date.now();switch(w.keyCode){case 37:c.left=
0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(l&&!(c.left|c.right|c.up|c.down))l=clearInterval(l);w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:h.zoom(Math.ceil(h.zoom())-1);break;case 43:case 61:h.zoom(Math.floor(h.zoom())+1);break;default:return}w.preventDefault()}function m(){if(h)if(!(Date.now()<f+t)){var w=(c.left-c.right)*k,A=(c.up-c.down)*k;if(w||A)h.panBy({x:w,y:A})}}var d={},c={left:0,right:0,up:0,down:0},f=0,l,t=250,n=
50,k=16,h,r;d.map=function(w){if(!arguments.length)return h;if(h){r.removeEventListener("keypress",a,false);r.removeEventListener("keydown",e,false);r.removeEventListener("keyup",i,false);r=null}if(h=w){r=h.focusableParent();r.addEventListener("keypress",a,false);r.addEventListener("keydown",e,false);r.addEventListener("keyup",i,false)}return d};d.speed=function(w){if(!arguments.length)return k;k=w;return d};return d};s.hash=function(){function e(){var l=f(d);if(m!==l)location.replace(m=l)}function i(){if(location.hash!==
m)if(c(d,(m=location.hash).substring(1)))e()}var a={},m,d,c=function(l,t){var n=t.split("/").map(Number);if(n.length<3||n.some(isNaN))return true;else{var k=l.size();l.zoomBy(n[0]-l.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,n[1])),lon:n[2]})}},f=function(l){var t=l.center();l=l.zoom();var n=Math.max(0,Math.ceil(Math.log(l)/Math.LN2));return"#"+l.toFixed(2)+"/"+t.lat.toFixed(n)+"/"+t.lon.toFixed(n)};a.map=function(l){if(!arguments.length)return d;if(d){d.off("move",e);
window.removeEventListener("hashchange",i,false)}if(d=l){d.on("move",e);window.addEventListener("hashchange",i,false);location.hash?i():e()}return a};a.parser=function(l){if(!arguments.length)return c;c=l;return a};a.formatter=function(l){if(!arguments.length)return f;f=l;return a};return a};s.touch=function(){function e(n){var k=-1,h=n.touches.length,r=Date.now();if(h==1&&r-c<300){var w=a.zoom();a.zoomBy(1-w+Math.floor(w),a.mouse(n.touches[0]));n.preventDefault()}c=r;f=a.zoom();for(l=a.angle();++k<
h;){r=n.touches[k];t[r.identifier]=a.pointLocation(a.mouse(r))}}var i={},a,m,d=false,c=0,f,l,t={};window.addEventListener("touchmove",function(n){switch(n.touches.length){case 1:var k=n.touches[0];a.zoomBy(0,a.mouse(k),t[k.identifier]);n.preventDefault();break;case 2:k=n.touches[0];var h=n.touches[1],r=a.mouse(k),w=a.mouse(h);r={x:(r.x+w.x)/2,y:(r.y+w.y)/2};k=s.map.locationCoordinate(t[k.identifier]);h=s.map.locationCoordinate(t[h.identifier]);h=s.map.coordinateLocation({row:(k.row+h.row)/2,column:(k.column+
h.column)/2,zoom:0});a.zoomBy(Math.log(n.scale)/Math.LN2+f-a.zoom(),r,h);d&&a.angle(n.rotation/180*Math.PI+l);n.preventDefault();break}},false);i.rotate=function(n){if(!arguments.length)return d;d=n;return i};i.map=function(n){if(!arguments.length)return a;if(a){m.removeEventListener("touchstart",e,false);m=null}if(a=n){m=a.container();m.addEventListener("touchstart",e,false)}return i};return i};s.interact=function(){var e={},i=s.drag(),a=s.wheel(),m=s.dblclick(),d=s.touch(),c=s.arrow();e.map=function(f){i.map(f);
a.map(f);m.map(f);d.map(f);c.map(f);return e};return e};s.compass=function(){function e(z){B.setAttribute("class","compass active");F||(F=setInterval(i,u));S&&I.panBy(S);x=Date.now();return k(z)}function i(){S&&Date.now()>x+g&&I.panBy(S)}function a(z){if(z.shiftKey){G={x0:I.mouse(z)};I.focusableParent().focus();return k(z)}}function m(z){if(G){G.x1=I.mouse(z);M.setAttribute("x",Math.min(G.x0.x,G.x1.x));M.setAttribute("y",Math.min(G.x0.y,G.x1.y));M.setAttribute("width",Math.abs(G.x0.x-G.x1.x));M.setAttribute("height",
Math.abs(G.x0.y-G.x1.y));M.removeAttribute("display")}}function d(){B.setAttribute("class","compass");if(G){if(G.x1){I.extent([I.pointLocation({x:Math.min(G.x0.x,G.x1.x),y:Math.max(G.x0.y,G.x1.y)}),I.pointLocation({x:Math.max(G.x0.x,G.x1.x),y:Math.min(G.x0.y,G.x1.y)})]);M.setAttribute("display","none")}G=null}if(F){clearInterval(F);F=0}}function c(z){return function(){z?this.setAttribute("class","active"):this.removeAttribute("class");S=z}}function f(z){return function(D){B.setAttribute("class","compass active");
var H=I.zoom();I.zoom(z<0?Math.ceil(H)-1:Math.floor(H)+1);return k(D)}}function l(z){return function(D){I.zoom(z);return k(D)}}function t(){this.setAttribute("class","active")}function n(){this.removeAttribute("class")}function k(z){z.stopPropagation();z.preventDefault();return false}function h(z){var D=Math.SQRT1_2*j,H=j*0.7,J=j*0.2,L=s.svg("g"),O=L.appendChild(s.svg("path")),Q=L.appendChild(s.svg("path"));O.setAttribute("class","direction");O.setAttribute("pointer-events","all");O.setAttribute("d",
"M0,0L"+D+","+D+"A"+j+","+j+" 0 0,1 "+-D+","+D+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(H-J)+"L0,"+H+" "+-J+","+(H-J));Q.setAttribute("pointer-events","none");L.addEventListener("mousedown",e,false);L.addEventListener("mouseover",c(z),false);L.addEventListener("mouseout",c(null),false);L.addEventListener("dblclick",k,false);return L}function r(z){var D=j*0.4,H=D/2,J=s.svg("g"),L=J.appendChild(s.svg("path")),O=J.appendChild(s.svg("path")),Q=J.appendChild(s.svg("path")),
X=J.appendChild(s.svg("path"));L.setAttribute("class","back");L.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");O.setAttribute("class","direction");O.setAttribute("d",L.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-H+","+-D+"H"+H+(z>0?"M0,"+(-D-H)+"V"+-H:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",L.getAttribute("d"));J.addEventListener("mousedown",f(z),false);J.addEventListener("mouseover",t,false);J.addEventListener("mouseout",
n,false);J.addEventListener("dblclick",k,false);return J}function w(z){var D=j*0.2,H=j*0.4,J=s.svg("g"),L=J.appendChild(s.svg("rect")),O=J.appendChild(s.svg("path"));L.setAttribute("pointer-events","all");L.setAttribute("fill","none");L.setAttribute("x",-H);L.setAttribute("y",-0.75*H);L.setAttribute("width",2*H);L.setAttribute("height",1.5*H);O.setAttribute("class","chevron");O.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",l(z),false);J.addEventListener("dblclick",k,false);return J}
function A(){var z=j+6,D=z,H=I.size();switch(o){case "top-left":break;case "top-right":z=H.x-z;break;case "bottom-left":D=H.y-D;break;case "bottom-right":z=H.x-z;D=H.y-D;break}B.setAttribute("transform","translate("+z+","+D+")");M.setAttribute("transform","translate("+-z+","+-D+")");for(var J in K)J==I.zoom()?K[J].setAttribute("class","active"):K[J].removeAttribute("class")}function C(){for(;B.lastChild;)B.removeChild(B.lastChild);B.appendChild(M);if(P!="none"){N=B.appendChild(s.svg("g"));N.setAttribute("class",
"pan");var z=N.appendChild(s.svg("circle"));z.setAttribute("class","back");z.setAttribute("r",j);N.appendChild(h({x:0,y:-q})).setAttribute("transform","rotate(0)");N.appendChild(h({x:q,y:0})).setAttribute("transform","rotate(90)");N.appendChild(h({x:0,y:q})).setAttribute("transform","rotate(180)");N.appendChild(h({x:-q,y:0})).setAttribute("transform","rotate(270)");z=N.appendChild(s.svg("circle"));z.setAttribute("fill","none");z.setAttribute("class","fore");z.setAttribute("r",j)}else N=null;if(y!=
"none"){v=B.appendChild(s.svg("g"));v.setAttribute("class","zoom");z=-0.5;if(y=="big"){K={};var D=I.zoomRange()[0];for(z=0;D<=I.zoomRange()[1];D++,z++)(K[D]=v.appendChild(w(D))).setAttribute("transform","translate(0,"+-(z+0.75)*j*0.4+")")}D=P=="none"?0.4:2;v.setAttribute("transform","translate(0,"+j*(/^top-/.test(o)?D+(z+0.5)*0.4:-D)+")");v.appendChild(r(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*j*0.4+")");v.appendChild(r(-1)).setAttribute("transform","scale(-1)")}else v=null;A()}var E=
{},B=s.svg("g"),K={},j=30,q=16,x=0,g=250,u=50,o="top-left",y="small",v,P="small",F,S,N,G,M=s.svg("rect"),I,T,U;B.setAttribute("class","compass");M.setAttribute("class","back fore");M.setAttribute("pointer-events","none");M.setAttribute("display","none");E.radius=function(z){if(!arguments.length)return j;j=z;I&&C();return E};E.speed=function(z){if(!arguments.length)return j;q=z;return E};E.position=function(z){if(!arguments.length)return o;o=z;I&&C();return E};E.pan=function(z){if(!arguments.length)return P;
P=z;I&&C();return E};E.zoom=function(z){if(!arguments.length)return y;y=z;I&&C();return E};E.map=function(z){if(!arguments.length)return I;if(I){T.removeEventListener("mousedown",a,false);T.removeChild(B);T=null;U.removeEventListener("mousemove",m,false);U.removeEventListener("mouseup",d,false);U=null;I.off("move",A).off("resize",A)}if(I=z){T=I.container();T.appendChild(B);T.addEventListener("mousedown",a,false);U=T.ownerDocument.defaultView;U.addEventListener("mousemove",m,false);U.addEventListener("mouseup",
d,false);I.on("move",A).on("resize",A);C()}return E};return E};s.grid=function(){function e(){var d=m.firstChild,c=a.size(),f=a.pointLocation(Y);a.pointLocation(c);var l=Math.pow(2,4-Math.round(a.zoom()));f.lat=Math.floor(f.lat/l)*l;f.lon=Math.ceil(f.lon/l)*l;for(var t;(t=a.locationPoint(f).x)<=c.x;f.lon+=l){d||(d=m.appendChild(s.svg("line")));d.setAttribute("x1",t);d.setAttribute("x2",t);d.setAttribute("y1",0);d.setAttribute("y2",c.y);d=d.nextSibling}for(;(t=a.locationPoint(f).y)<=c.y;f.lat-=l){d||
(d=m.appendChild(s.svg("line")));d.setAttribute("y1",t);d.setAttribute("y2",t);d.setAttribute("x1",0);d.setAttribute("x2",c.x);d=d.nextSibling}for(;d;){c=d.nextSibling;m.removeChild(d);d=c}}var i={},a,m=s.svg("g");m.setAttribute("class","grid");i.map=function(d){if(!arguments.length)return a;if(a){m.parentNode.removeChild(m);a.off("move",e).off("resize",e)}if(a=d){a.on("move",e).on("resize",e);a.container().appendChild(m);a.dispatch({type:"move"})}return i};return i};s.stylist=function(){function e(d){var c=
d.features.length,f=i.length,l=a.length,t,n,k,h,r,w;for(r=0;r<c;++r)if(n=(t=d.features[r]).element){t=t.data;for(w=0;w<f;++w){h=(k=i[w]).value;if(typeof h==="function")h=h.call(null,t);h==null?k.name.local?n.removeAttributeNS(k.name.space,k.name.local):n.removeAttribute(k.name):k.name.local?n.setAttributeNS(k.name.space,k.name.local,h):n.setAttribute(k.name,h)}for(w=0;w<l;++w){h=(k=a[w]).value;if(typeof h==="function")h=h.call(null,t);h==null?n.style.removeProperty(k.name):n.style.setProperty(k.name,
h,k.priority)}if(h=m){if(typeof h==="function")h=h.call(null,t);for(;n.lastChild;)n.removeChild(n.lastChild);h!=null&&n.appendChild(s.svg("title")).appendChild(document.createTextNode(h))}}}var i=[],a=[],m;e.attr=function(d,c){i.push({name:ea(d),value:c});return e};e.style=function(d,c,f){a.push({name:d,value:c,priority:arguments.length<3?null:f});return e};e.title=function(d){m=d;return e};return e}})(org.polymaps);
